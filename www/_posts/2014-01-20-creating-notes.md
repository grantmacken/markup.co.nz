---
title: creating notes
author: Grant MacKenzie
published: 2014-01-20T16:05:01
id: tag:markup.co.nz,2014-01-20:article:creating-notes
summary: On creating notes and attempting to POSSE
categories: indieweb
---

A note is 'a post with just plain text content'

A note will be short like a tweet

Like Articles my Notes content is wrapped as an atom entry
and stored in the data archive collection
```/data/archive/[year]/[month]/[day]/[file-name]`

The atom content is plain/text.
The atom id is a taguri with a note identifier.
```id: tag:markup.co.nz,2014-01-20:note:{file-name}```

The file-name may be autogenerated or created by user

The atom entry has a title but the note title may be semantically irrelevant. e.g.
'nth note for the day'

**Categories and hash tags** ToDo.
A note may belong to one or many categories.
When a note is syndicated to twitter.
Categories become hashtags appended to text.
Conversly Hashtags in md content context become md front-matter 'categories'


**Note char count**: When calculating 140 char take into account 'text' +
hashtags + backlink ( todo url shorten 22 chars Twitter t.co's URL size) <br/>
**Text** : If a note char count doesn't fit twitters 140 chars then this will
become an **abbr note**. In this case the *summary* is used with a link
otherwise the summary is not relevant. <br/> **Backlink**: If *abbr note* create
a ellipsis then a space then $url. ToDo: in the form of a
[permashortlink](https://indiewebcamp.com/permashortlinks) ToDo: If *not abbr
note* then the backlink is a
[permashortcitation](https://indiewebcamp.com/permashortcitation) . ```(domain
archive/[year]/[month]/[day]/[file-name] )``` (surrounded with brackets)
<br/>Note: Not convinced this is the best UX thing to do i.e. for my twitter
visitors.<br/> Note: ref Url shortening ideas below.


The backlink permalink is same as other posts
```archive/[year]/[month]/[day]/[file-name]`` and we need to shorten this with a
url shortner.

**Autolinking and embedding**: Todo  ref: [http://indiewebcamp.com/notes#Autolinking_and_embedding]


Ok thats enough! Time to hack.

Altering md2

Seperated out notes from articles

Created first note


UX: komodo toolbox for domain create-post

Todo: max length etc.

POSSE Notes to twitter
----------------------

From komodo project workspace or from website?

From komodo.

1. For interacting with twitter I choose
[twython](https://github.com/ryanmcgrath/twython) <br/>
```sudo pip install twython```

2. Goto [https://dev.twitter.com/](https://dev.twitter.com/) Add your app. Make
sure the setting application type is ``` Read, Write and Access direct
messages``` before you create your access token. And don't worry about the
callback url.

3. Add Twitter auth tokens to build.properties file. Note build.properties not
under git control so not in public domain. So all usernames password etc can go
into the build.properties file.

4. We call the following python script passing the md file as input. It will
strip the front-matter out and post remaining content text to twitter.

        import argparse
        import re
        import fileinput
        from configobj import ConfigObj
        from twython import Twython

        config = ConfigObj('build.properties')
        parser = argparse.ArgumentParser(description='Ony one arg')
        parser.add_argument('-i','--input', help='Input file name',required=True)
        args = parser.parse_args()
        print args.input
        source_file_content = open(args.input, 'r').read()
        frontMatterSub = re.compile("-{3}[\s\S]+-{3}", re.M)
        status_content = frontMatterSub.sub('', source_file_content).strip()

        APP_KEY = config.get('twitter.app.key')
        APP_SECRET = config.get('twitter.app.secret')
        OAUTH_TOKEN = config.get('twitter.oauth.token')
        OAUTH_TOKEN_SECRET = config.get('twitter.oauth.token_secret')
        twitter = Twython(APP_KEY, APP_SECRET,
                          OAUTH_TOKEN, OAUTH_TOKEN_SECRET)
        jsonResult = twitter.update_status(status=status_content)

From here we can grab the return id from the json response. Will add this to the
md front matter and be used to create a rel-syndication links.

  'Additionally the microformats2 class name u-syndication should also be placed
  on such hyperlinks from original posts (inside their h-entrymarkup/object) to
  their syndicated copies'  done

Todo Notes: Url shortening ideas.  Shorten with same [TinWhistle](https://github.com/sivy/TinWhistle)  engine.
Call perl from python when encoding url
Call perl from [nginx](http://nginx.org/en/docs/http/ngx_http_perl_module.html) when decoding url
then rewrite and expanded url proxied to exist

TinWhistle.pm


Ref:
* [POSSE Notes to Twitter Pseudocode](http://indiewebcamp.com/Twitter#POSSE_Notes_to_Twitter_Pseudocode)
* [twython](https://twython.readthedocs.org/en/latest/usage/basic_usage.html)
